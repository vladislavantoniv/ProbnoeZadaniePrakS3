<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #2c3e50; border-bottom: 3px solid #e74c3c; padding-bottom: 10px; }
    .back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: bold; }
    .form-container { background: #fdedec; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #e74c3c; }
    .form-container h3 { margin-top: 0; color: #2c3e50; }
    .form-group { margin: 15px 0; }
    label { display: inline-block; width: 180px; font-weight: bold; color: #2c3e50; }
    input, select, textarea { padding: 10px; width: 400px; border: 1px solid #bdc3c7; border-radius: 5px; font-size: 14px; }
    textarea { height: 80px; resize: vertical; }
    button { padding: 12px 25px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
    button:hover { background: #c0392b; }
    table { width: 100%; border-collapse: collapse; margin: 25px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background-color: #e74c3c; color: white; }
    tr:nth-child(even) { background-color: #f8f9fa; }
    .empty-message { text-align: center; color: #7f8c8d; padding: 20px; font-style: italic; }
    .status-registered { background: #f39c12; color: white; padding: 4px 8px; border-radius: 4px; }
    .status-in_progress { background: #3498db; color: white; padding: 4px 8px; border-radius: 4px; }
    .status-completed { background: #27ae60; color: white; padding: 4px 8px; border-radius: 4px; }
    .status-canceled { background: #95a5a6; color: white; padding: 4px 8px; border-radius: 4px; }
  </style>
</head>
<body>
<div class="container">
  <a th:href="@{/web}" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
  <h1>üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏</h1>

  <div class="form-container">
    <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É</h3>
    <form th:action="@{/web/orders}" method="post">
      <div class="form-group">
        <label>–ü–∞—Ü–∏–µ–Ω—Ç:</label>
        <select name="patientId" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞</option>
          <option th:each="patient : ${patients}"
                  th:value="${patient.id}"
                  th:text="${patient.lastName + ' ' + patient.firstName + ' (' + patient.birthDate + ')'}"></option>
        </select>
      </div>
      <div class="form-group">
        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea name="comment" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞—è–≤–∫–µ..."></textarea>
      </div>
      <button type="submit">üìÑ –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
    </form>
  </div>

  <h3>–°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫</h3>
  <table th:if="${not orders.empty}">
    <thead>
    <tr>
      <th>ID</th>
      <th>–ü–∞—Ü–∏–µ–Ω—Ç</th>
      <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
      <th>–°—Ç–∞—Ç—É—Å</th>
      <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
      <td th:text="${order.id}"></td>
      <td th:text="${order.patient.lastName + ' ' + order.patient.firstName}"></td>
      <td th:text="${#temporals.format(order.createdDate, 'dd.MM.yyyy HH:mm')}"></td>
      <td>
                        <span th:classappend="'status-' + ${order.status.name().toLowerCase()}"
                              th:text="${order.status == 'REGISTERED' ? '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞' :
                                       order.status == 'IN_PROGRESS' ? '–í —Ä–∞–±–æ—Ç–µ' :
                                       order.status == 'COMPLETED' ? '–ó–∞–≤–µ—Ä—à–µ–Ω–∞' : '–û—Ç–º–µ–Ω–µ–Ω–∞'}">
                        </span>
      </td>
      <td th:text="${order.comment} ?: '-'"></td>
    </tr>
    </tbody>
  </table>
  <div th:if="${orders.empty}" class="empty-message">
    üìù –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫
  </div>
</div>
</body>
</html>